{"ast":null,"code":"var _jsxFileName = \"/Users/joninguyen/Desktop/ACEP-LLM/Frontend/src/components/Chat.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from \"axios\";\nimport { Input } from \"./Chat/input\";\nimport { Button } from \"./Chat/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Searchbar() {\n  _s();\n  const [userInput, setUserInput] = useState(\"\");\n  const [responses, setResponses] = useState([{\n    text: \"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",\n    sender: \"bot\",\n    sources: [] // Initialize sources for each response\n  }]);\n  const handleInputChange = event => {\n    setUserInput(event.target.value);\n  };\n  const handleSend = async () => {\n    const userMessage = userInput;\n    try {\n      const response = await axios.post(\"http://127.0.0.1:5000/sendquery\", {\n        text: userInput\n      });\n      setResponses(prevResponses => [{\n        text: response.data.response,\n        sender: \"bot\",\n        sources: response.data.sources // Include sources with the response\n      }, {\n        text: userMessage,\n        sender: \"user\",\n        sources: []\n      }, ...prevResponses]);\n      setUserInput(\"\"); // Clear input after sending\n    } catch (error) {\n      setResponses(prevResponses => [{\n        text: \"Failed to get responses from LLM.\",\n        sender: \"bot\",\n        sources: []\n      }, {\n        text: userMessage,\n        sender: \"user\",\n        sources: []\n      }, ...prevResponses]);\n      console.error(\"Error sending message:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\",\n        style: {\n          maxWidth: 'screen',\n          maxHeight: '1050px',\n          overflowY: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col-reverse \",\n          style: {\n            minHeight: '100%'\n          },\n          children: responses.map((response, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center space-x-4 ${response.sender === \"user\" ? \"justify-end\" : \"\"}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `rounded-md p-4 mb-2 ${response.sender === \"bot\" ? \"bg-gray-100\" : \"bg-blue-100\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: `text-sm ${response.sender === \"bot\" ? \"text-gray-900\" : \"text-blue-800\"}`,\n                children: response.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 21\n              }, this), response.sender === \"bot\" && response.sources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"source-list\",\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \" Sources: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 25\n                }, this), response.sources.map((source, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  style: {\n                    textDecoration: 'underline'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: source[0] === \"text_file_1.pdf\" ? `https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link` : 'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link',\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    children: [source[0], \" on page \", source[1]]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 60,\n                    columnNumber: 27\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\",\n        style: {\n          maxWidth: '1200px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            value: userInput,\n            onChange: handleInputChange,\n            placeholder: \"Type your message here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleSend,\n            disabled: !userInput.trim(),\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 7\n  }, this);\n}\n_s(Searchbar, \"27ax8SGoV9u5rXc6OfaxmQ2ggjA=\");\n_c = Searchbar;\nvar _c;\n$RefreshReg$(_c, \"Searchbar\");","map":{"version":3,"names":["useState","axios","Input","Button","jsxDEV","_jsxDEV","Searchbar","_s","userInput","setUserInput","responses","setResponses","text","sender","sources","handleInputChange","event","target","value","handleSend","userMessage","response","post","prevResponses","data","error","console","className","children","style","maxWidth","maxHeight","overflowY","minHeight","map","index","fileName","_jsxFileName","lineNumber","columnNumber","length","source","textDecoration","href","rel","onChange","placeholder","onClick","disabled","trim","_c","$RefreshReg$"],"sources":["/Users/joninguyen/Desktop/ACEP-LLM/Frontend/src/components/Chat.tsx"],"sourcesContent":["import { useState } from 'react';\nimport axios from \"axios\";\nimport { Input } from \"./Chat/input\";\nimport { Button } from \"./Chat/button\";\n\nexport default function Searchbar() {\n    const [userInput, setUserInput] = useState(\"\");\n    const [responses, setResponses] = useState([\n        {\n        text: \"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",\n        sender: \"bot\",\n        sources: [] // Initialize sources for each response\n        },\n    ]);\n\n\n  const handleInputChange = (event) => {\n    setUserInput(event.target.value);\n  };\n\n  const handleSend = async () => {\n    const userMessage = userInput;\n    try {\n      const response = await axios.post(\"http://127.0.0.1:5000/sendquery\", { text: userInput });\n      setResponses((prevResponses) => [\n        {\n          text: response.data.response,\n          sender: \"bot\",\n          sources: response.data.sources // Include sources with the response\n        },\n        { text: userMessage, sender: \"user\" , sources: []},\n        ...prevResponses,\n      ]);\n      setUserInput(\"\"); // Clear input after sending\n    } catch (error) {\n      setResponses((prevResponses) => [\n        { text: \"Failed to get responses from LLM.\", sender: \"bot\", sources: [] },\n        { text: userMessage, sender: \"user\", sources: [] },\n        ...prevResponses,\n      ]);\n      console.error(\"Error sending message:\", error);\n    }\n  };\n\n    return (\n      <main className=\"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex flex-col items-center\">\n          <div className=\"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: 'screen', maxHeight: '1050px', overflowY: 'auto' }}>\n            <div className=\"flex flex-col-reverse \" style={{ minHeight: '100%' }}>\n              {responses.map((response, index) => (\n                <div key={index} className={`flex items-center space-x-4 ${response.sender === \"user\" ? \"justify-end\" : \"\"}`}>\n                  <div className={`rounded-md p-4 mb-2 ${response.sender === \"bot\" ? \"bg-gray-100\" : \"bg-blue-100\"}`}>\n                    <p className={`text-sm ${response.sender === \"bot\" ? \"text-gray-900\" : \"text-blue-800\"}`}>{response.text}</p>\n                    {response.sender === \"bot\" && response.sources.length > 0 && (\n                      <div className=\"source-list\">\n                        <br />\n                        <p className=\"text-sm text-gray-600\"> Sources: </p>\n                        {response.sources.map((source, index) => (\n                        <p key={index} className=\"text-sm text-gray-600\" style={{ textDecoration: 'underline' }}>\n                          <a href={source[0] === \"text_file_1.pdf\" ? `https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link` : 'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link'} rel=\"noopener noreferrer\" target=\"_blank\">{source[0]} on page {source[1]}</a>\n                        </p> ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: '1200px'}}>\n            <div className=\"flex items-center space-x-4\">\n              <Input value={userInput} onChange={handleInputChange} placeholder=\"Type your message here...\" />\n              <Button onClick={handleSend} disabled={!userInput.trim()}>Send</Button>\n            </div>\n          </div>\n        </div>\n      </main>\n    ); \n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/joninguyen/Desktop/ACEP-LLM/Frontend/src/components/Chat.tsx\";\nimport { useState } from 'react';\nimport axios from \"axios\";\nimport { Input } from \"./Chat/input\";\nimport { Button } from \"./Chat/button\";\nexport default function Searchbar() {\n  const [userInput, setUserInput] = useState(\"\");\n  const [responses, setResponses] = useState([{\n    text: \"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",\n    sender: \"bot\",\n    sources: [] // Initialize sources for each response\n  }]);\n  const handleInputChange = event => {\n    setUserInput(event.target.value);\n  };\n  const handleSend = async () => {\n    const userMessage = userInput;\n    try {\n      const response = await axios.post(\"http://127.0.0.1:5000/sendquery\", {\n        text: userInput\n      });\n      setResponses(prevResponses => [{\n        text: response.data.response,\n        sender: \"bot\",\n        sources: response.data.sources // Include sources with the response\n      }, {\n        text: userMessage,\n        sender: \"user\",\n        sources: []\n      }, ...prevResponses]);\n      setUserInput(\"\"); // Clear input after sending\n    } catch (error) {\n      setResponses(prevResponses => [{\n        text: \"Failed to get responses from LLM.\",\n        sender: \"bot\",\n        sources: []\n      }, {\n        text: userMessage,\n        sender: \"user\",\n        sources: []\n      }, ...prevResponses]);\n      console.error(\"Error sending message:\", error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\",\n    style: {\n      maxWidth: 'screen',\n      maxHeight: '1050px',\n      overflowY: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col-reverse \",\n    style: {\n      minHeight: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, responses.map((response, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: `flex items-center space-x-4 ${response.sender === \"user\" ? \"justify-end\" : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `rounded-md p-4 mb-2 ${response.sender === \"bot\" ? \"bg-gray-100\" : \"bg-blue-100\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: `text-sm ${response.sender === \"bot\" ? \"text-gray-900\" : \"text-blue-800\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, response.text), response.sender === \"bot\" && response.sources.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"source-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }, \" Sources: \"), response.sources.map((source, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    className: \"text-sm text-gray-600\",\n    style: {\n      textDecoration: 'underline'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: source[0] === \"text_file_1.pdf\" ? `https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link` : 'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link',\n    rel: \"noopener noreferrer\",\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 27\n    }\n  }, source[0], \" on page \", source[1]))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\",\n    style: {\n      maxWidth: '1200px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center space-x-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: userInput,\n    onChange: handleInputChange,\n    placeholder: \"Type your message here...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleSend,\n    disabled: !userInput.trim(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"Send\")))));\n}","map":{"version":3,"names":["useState","axios","Input","Button","Searchbar","userInput","setUserInput","responses","setResponses","text","sender","sources","handleInputChange","event","target","value","handleSend","userMessage","response","post","prevResponses","data","error","console","React","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","maxHeight","overflowY","minHeight","map","index","key","length","source","textDecoration","href","rel","onChange","placeholder","onClick","disabled","trim"],"sources":["/Users/joninguyen/Desktop/ACEP-LLM/Frontend/src/components/Chat.tsx"],"sourcesContent":["import { useState } from 'react';\nimport axios from \"axios\";\nimport { Input } from \"./Chat/input\";\nimport { Button } from \"./Chat/button\";\n\nexport default function Searchbar() {\n    const [userInput, setUserInput] = useState(\"\");\n    const [responses, setResponses] = useState([\n        {\n        text: \"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",\n        sender: \"bot\",\n        sources: [] // Initialize sources for each response\n        },\n    ]);\n\n\n  const handleInputChange = (event) => {\n    setUserInput(event.target.value);\n  };\n\n  const handleSend = async () => {\n    const userMessage = userInput;\n    try {\n      const response = await axios.post(\"http://127.0.0.1:5000/sendquery\", { text: userInput });\n      setResponses((prevResponses) => [\n        {\n          text: response.data.response,\n          sender: \"bot\",\n          sources: response.data.sources // Include sources with the response\n        },\n        { text: userMessage, sender: \"user\" , sources: []},\n        ...prevResponses,\n      ]);\n      setUserInput(\"\"); // Clear input after sending\n    } catch (error) {\n      setResponses((prevResponses) => [\n        { text: \"Failed to get responses from LLM.\", sender: \"bot\", sources: [] },\n        { text: userMessage, sender: \"user\", sources: [] },\n        ...prevResponses,\n      ]);\n      console.error(\"Error sending message:\", error);\n    }\n  };\n\n    return (\n      <main className=\"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex flex-col items-center\">\n          <div className=\"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: 'screen', maxHeight: '1050px', overflowY: 'auto' }}>\n            <div className=\"flex flex-col-reverse \" style={{ minHeight: '100%' }}>\n              {responses.map((response, index) => (\n                <div key={index} className={`flex items-center space-x-4 ${response.sender === \"user\" ? \"justify-end\" : \"\"}`}>\n                  <div className={`rounded-md p-4 mb-2 ${response.sender === \"bot\" ? \"bg-gray-100\" : \"bg-blue-100\"}`}>\n                    <p className={`text-sm ${response.sender === \"bot\" ? \"text-gray-900\" : \"text-blue-800\"}`}>{response.text}</p>\n                    {response.sender === \"bot\" && response.sources.length > 0 && (\n                      <div className=\"source-list\">\n                        <br />\n                        <p className=\"text-sm text-gray-600\"> Sources: </p>\n                        {response.sources.map((source, index) => (\n                        <p key={index} className=\"text-sm text-gray-600\" style={{ textDecoration: 'underline' }}>\n                          <a href={source[0] === \"text_file_1.pdf\" ? `https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link` : 'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link'} rel=\"noopener noreferrer\" target=\"_blank\">{source[0]} on page {source[1]}</a>\n                        </p> ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: '1200px'}}>\n            <div className=\"flex items-center space-x-4\">\n              <Input value={userInput} onChange={handleInputChange} placeholder=\"Type your message here...\" />\n              <Button onClick={handleSend} disabled={!userInput.trim()}>Send</Button>\n            </div>\n          </div>\n        </div>\n      </main>\n    ); \n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
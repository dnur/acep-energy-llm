{"ast":null,"code":"import{useState}from'react';import axios from\"axios\";import{Input}from\"./Chat/input\";import{Button}from\"./Chat/button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Searchbar(){const[userInput,setUserInput]=useState(\"\");const[responses,setResponses]=useState([{text:\"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",sender:\"bot\",sources:[]// Initialize sources for each response\n}]);const handleInputChange=event=>{setUserInput(event.target.value);};const handleSend=async()=>{const userMessage=userInput;try{const response=await axios.post(\"http://127.0.0.1:5000/sendquery\",{text:userInput});setResponses(prevResponses=>[{text:response.data.response,sender:\"bot\",sources:response.data.sources// Include sources with the response\n},{text:userMessage,sender:\"user\",sources:[]},...prevResponses]);setUserInput(\"\");// Clear input after sending\n}catch(error){setResponses(prevResponses=>[{text:\"Failed to get responses from LLM.\",sender:\"bot\",sources:[]},{text:userMessage,sender:\"user\",sources:[]},...prevResponses]);console.error(\"Error sending message:\",error);}};return/*#__PURE__*/_jsx(\"main\",{className:\"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\",style:{maxWidth:'screen',maxHeight:'1050px',overflowY:'auto'},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col-reverse \",style:{minHeight:'100%'},children:responses.map((response,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4 \".concat(response.sender===\"user\"?\"justify-end\":\"\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md p-4 mb-2 \".concat(response.sender===\"bot\"?\"bg-gray-100\":\"bg-blue-100\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(response.sender===\"bot\"?\"text-gray-900\":\"text-blue-800\"),children:response.text}),response.sender===\"bot\"&&response.sources.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"source-list\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\" Sources: \"}),response.sources.map((source,index)=>/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",style:{textDecoration:'underline'},children:/*#__PURE__*/_jsxs(\"a\",{href:source[0]===\"text_file_1.pdf\"?\"https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link\":'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link',rel:\"noopener noreferrer\",target:\"_blank\",children:[source[0],\" on page \",source[1]]})},index))]})]})},index))})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\",style:{maxWidth:'1200px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Input,{value:userInput,onChange:handleInputChange,placeholder:\"Type your message here...\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSend,disabled:!userInput.trim(),children:\"Send\"})]})})]})});}","map":{"version":3,"names":["useState","axios","Input","Button","jsx","_jsx","jsxs","_jsxs","Searchbar","userInput","setUserInput","responses","setResponses","text","sender","sources","handleInputChange","event","target","value","handleSend","userMessage","response","post","prevResponses","data","error","console","className","children","style","maxWidth","maxHeight","overflowY","minHeight","map","index","concat","length","source","textDecoration","href","rel","onChange","placeholder","onClick","disabled","trim"],"sources":["/Users/whitneywaldinger/capstone-repo/acep-energy-llm/Frontend/src/components/Chat.tsx"],"sourcesContent":["import { useState } from 'react';\nimport axios from \"axios\";\nimport { Input } from \"./Chat/input\";\nimport { Button } from \"./Chat/button\";\n\nexport default function Searchbar() {\n    const [userInput, setUserInput] = useState(\"\");\n    const [responses, setResponses] = useState([\n        {\n        text: \"Welcome to the ACEP Research Chatbot! I am your personalized research assistant. How can I help you?\",\n        sender: \"bot\",\n        sources: [] // Initialize sources for each response\n        },\n    ]);\n\n\n  const handleInputChange = (event) => {\n    setUserInput(event.target.value);\n  };\n\n  const handleSend = async () => {\n    const userMessage = userInput;\n    try {\n      const response = await axios.post(\"http://127.0.0.1:5000/sendquery\", { text: userInput });\n      setResponses((prevResponses) => [\n        {\n          text: response.data.response,\n          sender: \"bot\",\n          sources: response.data.sources // Include sources with the response\n        },\n        { text: userMessage, sender: \"user\" , sources: []},\n        ...prevResponses,\n      ]);\n      setUserInput(\"\"); // Clear input after sending\n    } catch (error) {\n      setResponses((prevResponses) => [\n        { text: \"Failed to get responses from LLM.\", sender: \"bot\", sources: [] },\n        { text: userMessage, sender: \"user\", sources: [] },\n        ...prevResponses,\n      ]);\n      console.error(\"Error sending message:\", error);\n    }\n  };\n\n    return (\n      <main className=\"mx-auto mt-10 max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex flex-col items-center\">\n          <div className=\"mt-6 mb-12 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: 'screen', maxHeight: '1050px', overflowY: 'auto' }}>\n            <div className=\"flex flex-col-reverse \" style={{ minHeight: '100%' }}>\n              {responses.map((response, index) => (\n                <div key={index} className={`flex items-center space-x-4 ${response.sender === \"user\" ? \"justify-end\" : \"\"}`}>\n                  <div className={`rounded-md p-4 mb-2 ${response.sender === \"bot\" ? \"bg-gray-100\" : \"bg-blue-100\"}`}>\n                    <p className={`text-sm ${response.sender === \"bot\" ? \"text-gray-900\" : \"text-blue-800\"}`}>{response.text}</p>\n                    {response.sender === \"bot\" && response.sources.length > 0 && (\n                      <div className=\"source-list\">\n                        <br />\n                        <p className=\"text-sm text-gray-600\"> Sources: </p>\n                        {response.sources.map((source, index) => (\n                        <p key={index} className=\"text-sm text-gray-600\" style={{ textDecoration: 'underline' }}>\n                          <a href={source[0] === \"text_file_1.pdf\" ? `https://drive.google.com/file/d/19_zABcxMESJdeNwcqsvgP9sfR-YhSvod/view?usp=drive_link` : 'https://drive.google.com/file/d/1Vwo1UwaWrY3KViHvKbATBYDYAOk6imsy/view?usp=drive_link'} rel=\"noopener noreferrer\" target=\"_blank\">{source[0]} on page {source[1]}</a>\n                        </p> ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"absolute bottom-6 mt-6 w-full rounded-md bg-white p-6 shadow\" style={{ maxWidth: '1200px'}}>\n            <div className=\"flex items-center space-x-4\">\n              <Input value={userInput} onChange={handleInputChange} placeholder=\"Type your message here...\" />\n              <Button onClick={handleSend} disabled={!userInput.trim()}>Send</Button>\n            </div>\n          </div>\n        </div>\n      </main>\n    ); \n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}